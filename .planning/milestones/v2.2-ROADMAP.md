# Milestone v2.2: Game Design Aspects

**Status:** IN PROGRESS (gap closure)
**Phases:** 51-53
**Total Plans:** 3

## Overview

Add composable "aspects" to `/design-game` that contribute sample Custom UI components based on detected game mechanics. Instead of forcing games into rigid categories (dice game, card game), aspects are detected from interview answers and combined in initial code generation.

**Core insight:** Games aren't neatly categorized — a roll-and-write has dice + scoring tracks, a deck-builder has standard cards + custom cards. Aspects let the skill generate appropriate starting UI for whatever combination the designer describes.

## Requirements

### Aspect Detection (DET)

- **DET-01**: Detect aspects from interview answers using keyword matching
- **DET-02**: Use Claude inference as fallback for ambiguous descriptions
- **DET-03**: Multiple aspects can be detected from a single interview
- **DET-04**: Detected aspects stored for use in code generation

### Aspect Templates (TPL)

- **TPL-01**: Each aspect lives in a separate template file
- **TPL-02**: Dice aspect provides Die3D component, DicePool setup, roll action pattern
- **TPL-03**: PlayingCards aspect provides card fan, deck pile, draw/play patterns
- **TPL-04**: HexGrid aspect provides hex board layout, cell selection pattern
- **TPL-05**: SquareGrid aspect provides grid layout, cell selection pattern
- **TPL-06**: Each template includes links to relevant BoardSmith documentation

### Integration (INT)

- **INT-01**: Aspect contributions merge into Custom UI (GameBoard.vue)
- **INT-02**: All detected aspects add their components to initial generation
- **INT-03**: Aspects only affect initial generation — designer modifies from there
- **INT-04**: Generation continues to work when no aspects detected (baseline)

## Phases

### Phase 51: aspect-templates

**Goal**: Create separate template files for each aspect with sample UI components

**Requirements**: TPL-01 through TPL-06

**Plans**:
- [x] 51-01-PLAN.md — Create all aspect template files

**Success criteria**:
- [x] `src/cli/slash-command/aspects/` directory created
- [x] `dice.md` template with Die3D usage, DicePool setup, roll handling
- [x] `playing-cards.md` template with CardFan, DeckPile, draw/play patterns
- [x] `hex-grid.md` template with hex board layout, cell click handling
- [x] `square-grid.md` template with grid layout, cell click handling
- [x] Each template includes doc links (dice-and-scoring.md, game-examples.md, etc.)

### Phase 52: detection-and-integration

**Goal**: Detect aspects from interview and merge into code generation

**Requirements**: DET-01 through DET-04, INT-01 through INT-04
**Depends on**: Phase 51

**Plans**:
- [x] 52-01-PLAN.md — Aspect detection and integration

**Success criteria**:
- [x] Aspect detection runs after interview phase
- [x] Keywords trigger detection: "dice/roll/d6" → Dice, "cards/deck/hand" → PlayingCards, etc.
- [x] Detected aspects listed in generation context
- [x] Custom UI includes components from all detected aspects
- [x] Games with no detected aspects still generate correctly

### Phase 53: deploy-aspect-templates

**Goal**: Ensure aspect templates are accessible at runtime when slash command is installed

**Requirements**: INT-02 (gap closure)
**Depends on**: Phase 52
**Gap Closure**: Closes gaps from v2.2-MILESTONE-AUDIT.md

**Plans**:
- [ ] 53-01-PLAN.md — Embed aspect templates into instructions.md

**Success criteria**:
- [ ] Aspect template content embedded inline in instructions.md
- [ ] No external file reads required for aspect templates
- [ ] Fresh install includes all aspect template content
- [ ] E2E flow works: Interview → Detection → Template Access → Generation
- [ ] Tech debt: 52-01-PLAN.md updated with completion marks
- [ ] Tech debt: Keywords synced between index.md and instructions.md

## Key Decisions

| Decision | Rationale |
|----------|-----------|
| Keyword detection with inference fallback | Explicit mentions are reliable; inference handles edge cases |
| Sample UI components, not full game logic | Aspects provide starting point; designer drives iteration |
| All aspects add to initial UI | No conflicts to resolve; designer removes what they don't need |
| Separate template files | Easier to extend, maintain, and review than inline templates |
| Embed templates for deployment | Self-containment matches v2.1 design; ensures runtime access |
| 4 aspects for v2.2 | Cover common patterns; CustomCards and ScoringTracks can come later |

## Aspect Summary

| Aspect | Keywords | Contributes |
|--------|----------|-------------|
| Dice | dice, roll, d4/d6/d8/d10/d12/d20 | Die3D, DicePool, roll action |
| PlayingCards | cards, deck, hand, deal, draw | CardFan, DeckPile, draw/play actions |
| HexGrid | hex, hexagon, honeycomb | HexGrid layout, hex cell selection |
| SquareGrid | grid, board, square, chess, checkers | Grid layout, cell selection |

## Future Aspects (Not This Milestone)

- **CustomCards** — Requires card design interview, more complex
- **ScoringTracks** — MonotonicTrack, CounterTrack for roll-and-write
- **Tokens/Markers** — Generic pieces with count tracking

---

_For current project status, see .planning/PROJECT.md_
