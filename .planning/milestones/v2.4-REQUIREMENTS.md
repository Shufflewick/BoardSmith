# Requirements Archive: v2.4 Animation Event System

**Archived:** 2026-01-22
**Status:** ✅ SHIPPED

This is the archived requirements specification for v2.4.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: BoardSmith v2.4

**Defined:** 2026-01-22
**Core Value:** Make board game development fast and correct — the framework handles multiplayer, AI, and UI so designers focus on game rules.

## v1 Requirements

Requirements for the Animation Event System milestone.

### Core Engine

- [x] **ENG-01**: Game class exposes `emitAnimationEvent(type, data, options?)` method
- [x] **ENG-02**: Animation events stored in buffer with unique IDs and timestamps
- [x] **ENG-03**: `pendingAnimationEvents` getter returns events not yet acknowledged
- [x] **ENG-04**: `acknowledgeAnimationEvents(upToId)` clears consumed events
- [x] **ENG-05**: Animation buffer serializes/restores with game state
- [x] **ENG-06**: Optional `group` field for batching related events

### Session Layer

- [x] **SES-01**: `PlayerGameState` includes `animationEvents` array
- [x] **SES-02**: `PlayerGameState` includes `lastAnimationEventId` for acknowledgment
- [x] **SES-03**: `GameSession.acknowledgeAnimations(playerSeat, upToId)` method
- [x] **SES-04**: Snapshot includes animation event buffer

### UI Layer

- [x] **UI-01**: `useAnimationEvents` composable with handler registration
- [x] **UI-02**: Handlers return Promises for animation timing control
- [x] **UI-03**: `isAnimating` ref indicates playback in progress
- [x] **UI-04**: `skipAll()` method to bypass remaining animations
- [x] **UI-05**: `paused` ref for pause/resume control
- [x] **UI-06**: `useActionController` exposes `animationsPending` computed
- [x] **UI-07**: `useActionController` exposes `showActionPanel` that gates on animations
- [x] **UI-08**: `useAutoAnimations` accepts `eventHandlers` option
- [x] **UI-09**: Export `useAnimationEvents` from `boardsmith/ui`

### Documentation

- [x] **DOC-01**: Document animation event system in `docs/ui-components.md`
- [x] **DOC-02**: Add animation events to `docs/nomenclature.md`

## v2 Requirements

Deferred to future release.

(None identified — scope is focused)

## Out of Scope

Explicitly excluded from this milestone.

| Feature | Reason |
|---------|--------|
| Flow-level blocking | Soft continuation chosen; flow never waits for animations |
| Animation event commands | Events are UI hints, not state mutations; parallel channel chosen |
| Backward compatibility | Clean API design prioritized over migration support |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| ENG-01 | Phase 59 | Complete |
| ENG-02 | Phase 59 | Complete |
| ENG-03 | Phase 59 | Complete |
| ENG-04 | Phase 59 | Complete |
| ENG-05 | Phase 59 | Complete |
| ENG-06 | Phase 59 | Complete |
| SES-01 | Phase 60 | Complete |
| SES-02 | Phase 60 | Complete |
| SES-03 | Phase 60 | Complete |
| SES-04 | Phase 60 | Complete |
| UI-01 | Phase 61 | Complete |
| UI-02 | Phase 61 | Complete |
| UI-03 | Phase 61 | Complete |
| UI-04 | Phase 61 | Complete |
| UI-05 | Phase 61 | Complete |
| UI-06 | Phase 62 | Complete |
| UI-07 | Phase 62 | Complete |
| UI-08 | Phase 62 | Complete |
| UI-09 | Phase 62 | Complete |
| DOC-01 | Phase 63 | Complete |
| DOC-02 | Phase 63 | Complete |

**Coverage:**
- v1 requirements: 21 total
- Mapped to phases: 21
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 21 of 21 v1 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-22 as part of v2.4 milestone completion*
