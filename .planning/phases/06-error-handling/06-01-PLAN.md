---
phase: 06-error-handling
plan: 01
type: execute
---

<objective>
Add error logging to boardRefs() call in selection-handler before suppressing the error.

Purpose: Make debugging easier when boardRefs() fails by logging the error before continuing.
Output: Error is logged to console before being silently ignored, improving debuggability.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./06-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONCERNS.md
@.planning/codebase/CONVENTIONS.md

# Prior phase context
@.planning/phases/05-type-safety/05-01-SUMMARY.md

# Source file
@packages/session/src/selection-handler.ts

**From CONCERNS.md:**
- Silent error suppression at selection-handler.ts:154-156
- Currently: `catch { // Ignore errors in boardRefs }`
- Recommendation: Add error logging before suppression

**Established conventions (from CONVENTIONS.md):**
- Use `console.error` for error logging
- No custom error classes
- Log state transitions for debugging
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add console.error logging to boardRefs catch block</name>
  <files>packages/session/src/selection-handler.ts</files>
  <action>
In the catch block at lines 154-156, add console.error to log the error before continuing.

Change from:
```typescript
} catch {
  // Ignore errors in boardRefs
}
```

To:
```typescript
} catch (e) {
  console.error('boardRefs() error (ignored):', e);
}
```

This follows the codebase convention of using console.error for errors and provides the error object for debugging while still allowing the code to continue.
  </action>
  <verify>grep -A1 "catch" packages/session/src/selection-handler.ts | grep console.error</verify>
  <done>Catch block logs error with console.error before continuing</done>
</task>

<task type="auto">
  <name>Task 2: Verify tests pass</name>
  <files>packages/session/tests/</files>
  <action>Run the session package tests to ensure the error logging change doesn't break anything.</action>
  <verify>npm test --workspace=packages/session</verify>
  <done>All session tests pass</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Error is logged with console.error in the catch block
- [ ] Error object is captured (not just empty catch)
- [ ] Tests pass
</verification>

<success_criteria>

- boardRefs() errors are logged before being suppressed
- No test regressions
- Console message includes enough context to debug
</success_criteria>

<output>
After completion, create `.planning/phases/06-error-handling/06-01-SUMMARY.md`
</output>
