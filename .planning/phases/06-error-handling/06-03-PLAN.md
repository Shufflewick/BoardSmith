---
phase: 06-error-handling
plan: 03
type: execute
---

<objective>
Document acceptable silent errors in the codebase, explaining why error suppression is intentional and appropriate.

Purpose: Some silent catch blocks are intentional (best-effort operations). Document why they're acceptable rather than "fixing" them.
Output: Comments explaining the rationale for each intentional silent catch block.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./06-03-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONCERNS.md

# Source files
@packages/worker/src/index.ts
@packages/cli/src/commands/dev.ts

**From CONCERNS.md - Silent error suppression locations:**
1. `packages/worker/src/index.ts:752` - Ignores WebSocket attachment errors
2. `packages/cli/src/commands/dev.ts:219` - Ignores cache cleanup failures

**Analysis - Why these are acceptable:**

1. **WebSocket attachment (worker/index.ts:752-754)**
   - `getWebSocketSession()` retrieves session data for telemetry/debugging
   - If attachment fails, function correctly returns undefined
   - Caller handles undefined case gracefully
   - No user-visible impact from failure
   - This is defensive coding, not error suppression

2. **Vite cache cleanup (dev.ts:218-220)**
   - Cache cleanup is best-effort operation
   - Dev server works correctly even if cache persists
   - User sees "Clearing Vite cache..." message, so they know it was attempted
   - Failure just means cached files remain (minor inconvenience)
   - Not worth interrupting dev server startup for cache cleanup failure

These don't need "fixes" - they need documentation explaining the intentional design.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document WebSocket attachment error suppression rationale</name>
  <files>packages/worker/src/index.ts</files>
  <action>
Add explanatory comment in the catch block at lines 752-754.

Change from:
```typescript
} catch {
  // Ignore errors
}
```

To:
```typescript
} catch {
  // Intentionally silent: attachment retrieval is best-effort for debugging.
  // If it fails, returning undefined is the correct fallback behavior.
}
```
  </action>
  <verify>grep -A2 "Intentionally silent" packages/worker/src/index.ts</verify>
  <done>WebSocket attachment catch block has explanatory comment documenting why silence is intentional</done>
</task>

<task type="auto">
  <name>Task 2: Document Vite cache cleanup error suppression rationale</name>
  <files>packages/cli/src/commands/dev.ts</files>
  <action>
Add explanatory comment in the catch block at lines 218-220.

Change from:
```typescript
} catch {
  // Ignore cache cleanup errors
}
```

To:
```typescript
} catch {
  // Intentionally silent: cache cleanup is best-effort.
  // Dev server works correctly even if stale cache remains.
}
```
  </action>
  <verify>grep -A2 "Intentionally silent" packages/cli/src/commands/dev.ts</verify>
  <done>Vite cache cleanup catch block has explanatory comment documenting why silence is intentional</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] WebSocket attachment catch block has rationale comment
- [ ] Vite cache cleanup catch block has rationale comment
- [ ] Comments explain WHY silence is acceptable (not just "ignore")
</verification>

<success_criteria>

- Silent catch blocks are documented with clear rationale
- Future maintainers understand the intentional design
- Phase 6 error handling concerns are fully addressed
</success_criteria>

<output>
After completion, create `.planning/phases/06-error-handling/06-03-SUMMARY.md`
</output>
