---
phase: 07-documentation
plan: 03
type: execute
---

<objective>
Add console warning when code-generator uses fallback checker function.

Purpose: Alert developers when generated AI code has incomplete objective checkers.
Output: Visible warning during AI code generation for unrecognized feature patterns.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./07-03-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONCERNS.md

# Source file
@packages/ai-trainer/src/code-generator.ts

**From CONCERNS.md - Test Coverage Gap:**
- File: `packages/ai-trainer/src/code-generator.ts:336`
- Code: `// TODO: Implement this checker based on game-specific logic`
- Risk: Generated AI code may have incomplete evaluation functions
- Priority: Medium (affects AI training quality)

**Current state (lines 333-339):**
```typescript
  // Default fallback with description as comment
  return `() => {
        // ${obj.description}
        // TODO: Implement this checker based on game-specific logic
        return true;
      }`;
```

When `generateCheckerFunction` can't pattern-match a feature ID, it returns a fallback that always returns true. This is silent â€” the user gets generated code with a TODO comment but no build-time warning.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add console.warn when fallback checker is used</name>
  <files>packages/ai-trainer/src/code-generator.ts</files>
  <action>
Before the fallback return statement, add a console.warn to alert during code generation:

Change from:
```typescript
  // Default fallback with description as comment
  return `() => {
        // ${obj.description}
        // TODO: Implement this checker based on game-specific logic
        return true;
      }`;
```

To:
```typescript
  // Default fallback with description as comment
  console.warn(
    `[AI Code Generator] Unknown feature pattern: "${id}". ` +
    `Generated fallback checker that always returns true. ` +
    `Consider implementing custom logic for: ${obj.description}`
  );
  return `() => {
        // ${obj.description}
        // TODO: Implement this checker based on game-specific logic
        return true;
      }`;
```

This way, when `npx boardsmith build-ai` runs, users will see which objectives got fallback checkers.
  </action>
  <verify>grep -A5 "Default fallback" packages/ai-trainer/src/code-generator.ts | grep -c "console.warn" shows 1</verify>
  <done>Code generator warns when using fallback checker function</done>
</task>

<task type="auto">
  <name>Task 2: Update TODO comment to be more actionable</name>
  <files>packages/ai-trainer/src/code-generator.ts</files>
  <action>
Update the TODO comment in the generated fallback to be more actionable:

Change from:
```typescript
        // TODO: Implement this checker based on game-specific logic
```

To:
```typescript
        // WARNING: Auto-generated fallback - always returns true
        // Implement game-specific logic for better AI performance
```

This makes it clearer in the generated ai.ts file that this needs attention.
  </action>
  <verify>grep "WARNING: Auto-generated fallback" packages/ai-trainer/src/code-generator.ts returns the updated comment</verify>
  <done>Generated fallback has clearer warning comment</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] console.warn added to fallback branch in generateCheckerFunction
- [ ] Generated code comment updated to be more actionable
- [ ] `npm run typecheck` passes
</verification>

<success_criteria>

- Developers see warning when AI code generation uses fallback
- Generated code clearly indicates fallback needs implementation
- No silent incomplete AI objective checkers
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation/07-03-SUMMARY.md`
</output>
