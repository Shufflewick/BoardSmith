---
phase: 10-public-api-jsdoc
plan: 03
type: execute
---

<objective>
Add JSDoc documentation to the testing package - utilities game developers use to test their games.

Purpose: Game developers need test utilities. Clear documentation helps them write effective tests.
Output: JSDoc comments on test utilities, assertions, fixtures, and debug helpers.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-public-api-jsdoc/10-01-SUMMARY.md
@.planning/phases/10-public-api-jsdoc/10-02-SUMMARY.md

# Key files to document:
@packages/testing/src/index.ts
@packages/testing/src/test-game.ts
@packages/testing/src/simulate-action.ts
@packages/testing/src/assertions.ts
@packages/testing/src/fixtures.ts
@packages/testing/src/debug.ts
@packages/testing/src/random-simulation.ts

# Reference for JSDoc style:
@packages/ai/src/index.ts (createBot has good JSDoc)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add JSDoc to test-game and simulate-action</name>
  <files>packages/testing/src/test-game.ts, packages/testing/src/simulate-action.ts</files>
  <action>
**test-game.ts:**
Add JSDoc to TestGame class and createTestGame:
- `TestGame` class: Explain purpose (test wrapper for games)
- `createTestGame()`: Document parameters, return type
- Key methods: `performAction()`, `getState()`, `getCurrentPlayer()`
- Include @example showing typical test setup

**simulate-action.ts:**
Add JSDoc to action simulation functions:
- `simulateAction()`: Run a single action, document params and return
- `simulateActions()`: Run multiple actions in sequence
- `assertActionSucceeds()`: Assert action succeeds
- `assertActionFails()`: Assert action fails with expected error

For each function:
- Purpose in 1-2 sentences
- @param for each parameter
- @returns with type description
- @example for key functions
  </action>
  <verify>TypeScript compiles: `cd /Users/jtsmith/board_game_service/BoardSmith && pnpm exec tsc --noEmit -p packages/testing`</verify>
  <done>test-game and simulate-action have comprehensive JSDoc</done>
</task>

<task type="auto">
  <name>Task 2: Add JSDoc to assertions and fixtures</name>
  <files>packages/testing/src/assertions.ts, packages/testing/src/fixtures.ts</files>
  <action>
**assertions.ts:**
Add JSDoc to assertion functions:
- `assertFlowState()`: Assert game is in expected flow state
- `assertPlayerHas()`: Assert player has certain elements
- `assertElementCount()`: Assert element count
- `assertGameFinished()`: Assert game has ended
- `assertActionAvailable()`: Assert action is available
- `assertActionNotAvailable()`: Assert action is not available

For each:
- Purpose
- @param documentation
- @throws if assertion fails
- @example showing usage in a test

**fixtures.ts:**
Add JSDoc to fixture helpers:
- `ScenarioBuilder` class: Document purpose and methods
- `scenario()`: Create scenario builder
- `quickGame()`: Start game and get to playable state
- `playSequence()`: Execute sequence of actions
- `playUntil()`: Play until condition met
- `createMultiple()`: Create multiple test instances

For each:
- Purpose
- @param and @returns
- @example for complex helpers
  </action>
  <verify>TypeScript compiles: `cd /Users/jtsmith/board_game_service/BoardSmith && pnpm exec tsc --noEmit -p packages/testing`</verify>
  <done>assertions and fixtures have JSDoc with examples</done>
</task>

<task type="auto">
  <name>Task 3: Add JSDoc to debug utilities and package index</name>
  <files>packages/testing/src/debug.ts, packages/testing/src/random-simulation.ts, packages/testing/src/index.ts</files>
  <action>
**debug.ts:**
Add JSDoc to debug utilities:
- `toDebugString()`: Convert element tree to readable string
- `traceAction()`: Trace action execution for debugging
- `visualizeFlow()`: Show flow structure
- `visualizeFlowWithPosition()`: Show flow with current position
- `debugFlowState()`: Get debug info about flow state
- `logAvailableActions()`: Log available actions
- `diffSnapshots()`: Compare two game snapshots

For each:
- Purpose
- @param and @returns
- @example for commonly used functions

**random-simulation.ts:**
Add JSDoc to random simulation:
- `simulateRandomGames()`: Run random game simulations
- Document options and results types

**index.ts:**
Add package-level JSDoc comment at top of file:
```typescript
/**
 * @boardsmith/testing - Test utilities for BoardSmith games
 *
 * @example
 * ```typescript
 * import { createTestGame, simulateAction, assertFlowState } from '@boardsmith/testing';
 *
 * test('player can draw a card', async () => {
 *   const game = createTestGame(MyGame, { playerCount: 2 });
 *   await simulateAction(game, 'draw', 0);
 *   assertFlowState(game, { waitingFor: 'play' });
 * });
 * ```
 */
```
  </action>
  <verify>TypeScript compiles: `cd /Users/jtsmith/board_game_service/BoardSmith && pnpm exec tsc --noEmit -p packages/testing`</verify>
  <done>Debug utilities and package index have JSDoc, package has top-level documentation</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm exec tsc --noEmit -p packages/testing` passes
- [ ] TestGame and simulation functions have JSDoc
- [ ] Assertion functions have JSDoc with @throws
- [ ] Fixture helpers have JSDoc with examples
- [ ] Debug utilities have JSDoc
- [ ] Package index has package-level JSDoc
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors introduced
- Testing package is well-documented for game developers
- Phase 10 complete
</success_criteria>

<output>
After completion, create `.planning/phases/10-public-api-jsdoc/10-03-SUMMARY.md`

This is the final plan for Phase 10. Success criteria should include "Phase 10 complete".
</output>
