---
phase: 44-game-extraction
plan: 02
type: execute
wave: 2
depends_on: ["44-01"]
files_modified:
  - /private/tmp/boardsmith-test-target/hex/package.json
  - /private/tmp/boardsmith-test-target/hex/boardsmith.json
  - /private/tmp/boardsmith-test-target/hex/tsconfig.json
  - /private/tmp/boardsmith-test-target/hex/vite.config.ts
  - /private/tmp/boardsmith-test-target/hex/vitest.config.ts
  - /private/tmp/boardsmith-test-target/hex/index.html
  - /private/tmp/boardsmith-test-target/hex/.gitignore
  - /private/tmp/boardsmith-test-target/hex/src/**
  - /private/tmp/boardsmith-test-target/hex/tests/**
autonomous: true

must_haves:
  truths:
    - "Hex game exists as standalone project in /private/tmp/boardsmith-test-target/hex"
    - "Hex imports use boardsmith package (not @boardsmith/*)"
    - "Hex has unified src/ structure (rules and ui in src/)"
  artifacts:
    - path: "/private/tmp/boardsmith-test-target/hex/package.json"
      provides: "Standalone npm package config"
      contains: '"boardsmith"'
    - path: "/private/tmp/boardsmith-test-target/hex/src/rules/game.ts"
      provides: "HexGame class"
      contains: "from 'boardsmith'"
    - path: "/private/tmp/boardsmith-test-target/hex/src/ui/App.vue"
      provides: "Vue app component"
      contains: "from 'boardsmith/ui'"
  key_links:
    - from: "/private/tmp/boardsmith-test-target/hex/src/rules/game.ts"
      to: "boardsmith"
      via: "import statement"
      pattern: "from 'boardsmith'"
---

<objective>
Extract Hex game to standalone repository (GAME-01)

Purpose: Hex is the first split-structure game to extract. It has rules/, ui/, tests/ subdirectories that need consolidation into unified src/ structure.

Output: Complete standalone Hex game at /private/tmp/boardsmith-test-target/hex/ with all imports rewritten to use boardsmith package.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-game-extraction/44-RESEARCH.md
@.planning/phases/44-game-extraction/44-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Hex project structure and copy templates</name>
  <files>
    /private/tmp/boardsmith-test-target/hex/
  </files>
  <action>
1. Create the hex directory structure:
```bash
mkdir -p /private/tmp/boardsmith-test-target/hex/src/rules
mkdir -p /private/tmp/boardsmith-test-target/hex/src/ui/components
mkdir -p /private/tmp/boardsmith-test-target/hex/tests
mkdir -p /private/tmp/boardsmith-test-target/hex/public
```

2. Copy template files from 44-01:
```bash
cp /private/tmp/boardsmith-test-target/templates/tsconfig.json /private/tmp/boardsmith-test-target/hex/
cp /private/tmp/boardsmith-test-target/templates/vite.config.ts /private/tmp/boardsmith-test-target/hex/
cp /private/tmp/boardsmith-test-target/templates/vitest.config.ts /private/tmp/boardsmith-test-target/hex/
cp /private/tmp/boardsmith-test-target/templates/.gitignore /private/tmp/boardsmith-test-target/hex/
```

3. Create customized package.json (replace {GAME_NAME} with "hex"):
- Copy template package.json
- Replace {GAME_NAME} with "hex"

4. Create customized index.html (replace {DISPLAY_NAME} with "Hex"):
- Copy template index.html
- Replace {DISPLAY_NAME} with "Hex"

5. Create modern boardsmith.json:
```json
{
  "$schema": "https://boardsmith.io/schemas/game.json",
  "name": "hex",
  "displayName": "Hex",
  "description": "Classic connection game - connect your sides of the board",
  "playerCount": { "min": 2, "max": 2 },
  "estimatedDuration": "15-30 minutes",
  "complexity": 2,
  "categories": ["strategy", "abstract"]
}
```
  </action>
  <verify>Directory structure exists: `ls -laR /private/tmp/boardsmith-test-target/hex/`</verify>
  <done>Hex project skeleton with templates and customized config files</done>
</task>

<task type="auto">
  <name>Task 2: Copy and transform source files</name>
  <files>
    /private/tmp/boardsmith-test-target/hex/src/rules/*.ts
    /private/tmp/boardsmith-test-target/hex/src/ui/*.vue
    /private/tmp/boardsmith-test-target/hex/src/ui/*.ts
    /private/tmp/boardsmith-test-target/hex/src/main.ts
    /private/tmp/boardsmith-test-target/hex/tests/*.ts
  </files>
  <action>
**Copy rules files (from split rules/src/ to unified src/rules/):**

Source: packages/games/hex/rules/src/*.ts
Target: /private/tmp/boardsmith-test-target/hex/src/rules/

Files to copy:
- game.ts
- elements.ts
- actions.ts
- flow.ts
- ai.ts
- index.ts

**Transform imports in each rules file:**
- `@boardsmith/engine` -> `boardsmith`
- `@boardsmith/ai` -> `boardsmith/ai`
- Internal rules imports stay relative (./game.js, ./elements.js, etc.)

**Copy UI files (from split ui/src/ to unified src/ui/):**

Source: packages/games/hex/ui/src/
Target: /private/tmp/boardsmith-test-target/hex/src/ui/

Files to copy:
- App.vue -> src/ui/App.vue
- main.ts -> src/main.ts (root level)
- components/HexBoard.vue -> src/ui/components/HexBoard.vue

**Transform imports in UI files:**
- `@boardsmith/engine` -> `boardsmith`
- `@boardsmith/ui` -> `boardsmith/ui`
- `@boardsmith/hex-rules` -> `../rules/index.js` (internal reference)

**Copy test files:**

Source: packages/games/hex/tests/
Target: /private/tmp/boardsmith-test-target/hex/tests/

Files to copy:
- game.test.ts

**Transform imports in test files:**
- `@boardsmith/engine` -> `boardsmith`
- `@boardsmith/testing` -> `boardsmith/testing`
- `@boardsmith/hex-rules` -> `../src/rules/index.js` (internal reference)

**Create src/ui/index.ts:**
```typescript
import App from './App.vue';
export { App };
export { default as HexBoard } from './components/HexBoard.vue';
```
  </action>
  <verify>
All source files exist and have transformed imports:
- `grep -r "@boardsmith" /private/tmp/boardsmith-test-target/hex/src/` should return nothing
- `grep -r "from 'boardsmith'" /private/tmp/boardsmith-test-target/hex/src/` should return matches
  </verify>
  <done>All source files copied with imports transformed from @boardsmith/* to boardsmith/*</done>
</task>

<task type="auto">
  <name>Task 3: Initialize git repository</name>
  <files>/private/tmp/boardsmith-test-target/hex/.git</files>
  <action>
Initialize the hex project as a git repository:

```bash
cd /private/tmp/boardsmith-test-target/hex
git init
git add .
git commit -m "Initial commit: Hex game extracted from BoardSmith monorepo"
```

This creates a standalone git repo for the hex game.
  </action>
  <verify>`git -C /private/tmp/boardsmith-test-target/hex log --oneline` shows initial commit</verify>
  <done>Hex is a standalone git repository with initial commit</done>
</task>

</tasks>

<verification>
- [ ] Hex project exists at /private/tmp/boardsmith-test-target/hex/
- [ ] Unified src/ structure (src/rules/, src/ui/)
- [ ] No @boardsmith/* imports remain (grep returns empty)
- [ ] All boardsmith imports are correct (boardsmith, boardsmith/ui, boardsmith/ai, boardsmith/testing)
- [ ] Git repository initialized with initial commit
- [ ] package.json has "boardsmith" dependency (not @boardsmith/*)
</verification>

<success_criteria>
Hex game extracted as complete standalone project. All imports use new boardsmith package paths. Project is a git repository ready for independent development.
</success_criteria>

<output>
After completion, create `.planning/phases/44-game-extraction/44-02-SUMMARY.md`
</output>
