---
phase: 47-initial-interview-and-generation
plan: 03
type: execute
wave: 3
depends_on: ["47-02"]
files_modified:
  - src/cli/slash-command/design-game.template.md
autonomous: false

must_haves:
  truths:
    - "Template points to updated instructions.md"
    - "End-to-end flow works: no project -> interview -> generation -> playtest prompt"
  artifacts:
    - path: "src/cli/slash-command/design-game.template.md"
      provides: "Entry point for /design-game command"
      contains: "instructions.md"
  key_links:
    - from: "design-game.template.md"
      to: "instructions.md"
      via: "file reference"
      pattern: "instructions.md"
---

<objective>
Update the slash command template and verify end-to-end flow works correctly.

Purpose: Ensure /design-game is ready for use by non-programmer designers
Output: Updated template, verified workflow
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/47-initial-interview-and-generation/47-RESEARCH.md
@.planning/phases/47-initial-interview-and-generation/47-02-SUMMARY.md

# Source files
@src/cli/slash-command/design-game.template.md
@src/cli/slash-command/instructions.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update design-game.template.md</name>
  <files>src/cli/slash-command/design-game.template.md</files>
  <action>
Update the template file to work with the new instructions structure.

Current template points to old path. Update to:
1. Point to correct instructions.md path (src/cli/slash-command/instructions.md)
2. Add brief context about iterative design approach
3. Keep the BOARDSMITH_ROOT placeholder pattern

New content:
```markdown
# Design a BoardSmith Game

You are helping a non-programmer game designer create a board game using BoardSmith.

Read and follow the instructions in:
`{{BOARDSMITH_ROOT}}/src/cli/slash-command/instructions.md`

The BoardSmith engine is installed at: `{{BOARDSMITH_ROOT}}`

Replace all occurrences of `<BOARDSMITH_ROOT>` in those instructions with the path above.

**Important:** This is an iterative process. You'll help the designer:
1. First time: Interview them and generate a minimal playable game
2. After playtesting: Help them add features one at a time

Start by checking for PROJECT.md to determine which flow to use.
```
  </action>
  <verify>cat src/cli/slash-command/design-game.template.md shows updated content</verify>
  <done>Template updated with correct path and iterative context</done>
</task>

<task type="auto">
  <name>Task 2: Verify instructions.md completeness</name>
  <files>src/cli/slash-command/instructions.md</files>
  <action>
Review the complete instructions.md file and verify:

1. **Structure check** - File has all required sections in order:
   - Header/Purpose
   - Reference file reading
   - Phase 1: State Detection
   - Phase 2: Structured Interview
   - Governor Pattern
   - Phase 3: Create Artifacts
   - Phase 4: Generate Initial Code
   - Phase 5: Verify Compilation
   - Phase 6: Playtest Prompt

2. **Requirements coverage** - Verify each requirement is addressed:
   - STATE-01: No project detection
   - STATE-04: Single command adapts
   - INT-01 through INT-06: Interview questions
   - GOV-01 through GOV-03: Governor pattern
   - ART-01 through ART-03: Templates
   - GEN-01 through GEN-05: Code generation

3. **Flow coherence** - Sections flow logically from one to next

4. **Placeholder consistency** - BOARDSMITH_ROOT used consistently

If any issues found, fix them.
  </action>
  <verify>instructions.md contains sections for all phases (1-6)</verify>
  <done>Instructions verified complete and coherent</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete /design-game skill redesign with state detection, structured interview, governor pattern, artifact templates, and code generation</what-built>
  <how-to-verify>
1. Review src/cli/slash-command/instructions.md structure
2. Verify the interview flow is clear and non-programmer friendly
3. Verify governor pattern explains ACDR clearly
4. Verify code generation patterns are minimal (placeholder-first)
5. Verify playtest prompt reminds about deferred ideas

Optional: Test by running the skill in a new directory (separate from BoardSmith) to verify the no-project detection and interview flow
  </how-to-verify>
  <resume-signal>Type "approved" if skill design looks good, or describe issues to address</resume-signal>
</task>

</tasks>

<verification>
- [ ] design-game.template.md points to correct instructions path
- [ ] instructions.md has all 6 phases
- [ ] All Phase 47 requirements covered (STATE-01, STATE-04, INT-01-06, GOV-01-03, ART-01-03, GEN-01-05)
- [ ] Tone is appropriate for non-programmer designers
- [ ] Human verification approved
</verification>

<success_criteria>
/design-game skill redesign complete and verified working for the initial interview and generation flow
</success_criteria>

<output>
After completion, create `.planning/phases/47-initial-interview-and-generation/47-03-SUMMARY.md`
</output>
