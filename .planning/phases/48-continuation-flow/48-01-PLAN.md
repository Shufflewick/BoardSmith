---
phase: 48-continuation-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/cli/slash-command/instructions.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "/design-game validates code compiles before proceeding to continuation"
    - "/design-game asks about playtest results after detecting phase-complete"
    - "Designer can report bugs/issues or skip feedback"
    - "Feedback is categorized into Works/Needs Fix/Ideas"
  artifacts:
    - path: "src/cli/slash-command/instructions.md"
      provides: "Continuation flow detection and feedback gathering sections"
      contains: "## Phase 8: Validate Completion"
  key_links:
    - from: "instructions.md Phase 1"
      to: "instructions.md Phase 8"
      via: "State detection branching"
      pattern: "Proceed to Continuation Flow"
---

<objective>
Add continuation flow detection and feedback gathering to /design-game instructions

Purpose: Enable the skill to validate phase-complete state and gather structured playtest feedback before presenting next options. This implements the first half of the designer's "return after playtesting" journey.

Output: Updated instructions.md with Phases 8-9 covering state validation and feedback collection
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/48-continuation-flow/48-RESEARCH.md
@.planning/phases/48-continuation-flow/48-CONTEXT.md
@src/cli/slash-command/instructions.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Phase 8 - Validate Completion</name>
  <files>src/cli/slash-command/instructions.md</files>
  <action>
Add "## Phase 8: Validate Completion" section after Phase 7 (Playtest Prompt).

Content should cover:
1. When this phase runs: After Phase 1 state detection finds PROJECT.md + STATE.md Status: Complete
2. Run `npx tsc --noEmit` to verify code actually compiles
3. If tsc passes: Proceed to Phase 9 (Gather Feedback)
4. If tsc fails: This is actually "In Progress" state - display "Let me fix that first..." and repair the broken code before continuing

Key insight from RESEARCH.md: "STATE.md is the claim, artifacts are the proof"

Include a flow diagram similar to Phase 1's state detection showing the branching logic.
  </action>
  <verify>grep "Phase 8: Validate Completion" src/cli/slash-command/instructions.md returns content</verify>
  <done>Phase 8 section exists with tsc validation logic and branching based on compilation result</done>
</task>

<task type="auto">
  <name>Task 2: Add Phase 9 - Gather Playtest Feedback</name>
  <files>src/cli/slash-command/instructions.md</files>
  <action>
Add "## Phase 9: Gather Playtest Feedback" section after Phase 8.

Content should cover:
1. Opening prompt: "Phase [N] complete! What stood out from playtesting?"
2. Feedback categories (from CONTEXT.md):
   - **Works** - things that played well
   - **Needs Fix** - broken or confusing mechanics
   - **Ideas** - new ideas that emerged during play
3. Structured extraction example: Show how to parse freeform feedback into categories
4. Response pattern: Acknowledge each category, confirm understanding, ask "Anything else, or should we move to what's next?"
5. Skip path: If designer says "nothing to report" or "let's move on", proceed to Phase 10

Emphasize from CONTEXT.md: Feedback is OPTIONAL - don't make designers feel interrogated.

Include an example dialogue showing both a feedback response and a skip response.
  </action>
  <verify>grep "Phase 9: Gather Playtest Feedback" src/cli/slash-command/instructions.md returns content</verify>
  <done>Phase 9 section exists with feedback categories, extraction pattern, skip path, and example dialogues</done>
</task>

<task type="auto">
  <name>Task 3: Update Phase 1 State Detection References</name>
  <files>src/cli/slash-command/instructions.md</files>
  <action>
Update the Phase 1 state detection section to properly reference the new continuation flow phases:

Find the text "Proceed to Continuation Flow (covered in Phase 48)" or similar placeholder text and replace with:
"Proceed to Phase 8: Validate Completion"

This wires up the state detection branching to the newly added phases.

Also ensure the state detection logic mentions what "Status: Complete" means (as defined in Phase 7's final STATE.md update).
  </action>
  <verify>grep -A5 "status shows.*phase complete" src/cli/slash-command/instructions.md shows "Phase 8" reference</verify>
  <done>Phase 1 state detection properly references Phase 8 for continuation flow</done>
</task>

</tasks>

<verification>
1. instructions.md has continuous phase numbering (1-9 at minimum)
2. State detection in Phase 1 branches to Phase 8 for complete state
3. Phase 8 validates with tsc before proceeding
4. Phase 9 gathers optional feedback with structured categories
5. Both phases have example dialogues/flows
</verification>

<success_criteria>
- STATE-02 implemented: Phase 8 detects and validates "phase complete" state
- CON-01 implemented: Phase 9 asks about playtest results
- CON-02 implemented: Phase 9 allows reporting bugs/issues (Needs Fix category)
- Wiring complete: Phase 1 -> Phase 8 -> Phase 9 path exists
</success_criteria>

<output>
After completion, create `.planning/phases/48-continuation-flow/48-01-SUMMARY.md`
</output>
