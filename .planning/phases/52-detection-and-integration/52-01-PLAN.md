# Phase 52-01: Aspect Detection and Integration

## Goal

Add aspect detection to the interview phase and integrate detected aspects into code generation.

## Requirements Addressed

- DET-01: Detect aspects from interview answers using keyword matching
- DET-02: Use Claude inference as fallback for ambiguous descriptions
- DET-03: Multiple aspects can be detected from a single interview
- DET-04: Detected aspects stored for use in code generation
- INT-01: Aspect contributions merge into Custom UI (GameBoard.vue)
- INT-02: All detected aspects add their components to initial generation
- INT-03: Aspects only affect initial generation â€” designer modifies from there
- INT-04: Generation continues to work when no aspects detected (baseline)

## Tasks

1. [x] Create aspect index file listing available aspects and their keywords
2. [x] Add "Aspect Detection" section after Phase 2 interview in instructions.md
3. [x] Define keyword detection rules for each aspect:
   - Dice: dice, roll, d4, d6, d8, d10, d12, d20
   - PlayingCards: cards, deck, hand, deal, draw, suit, rank
   - HexGrid: hex, hexagon, honeycomb
   - SquareGrid: grid, board, square, chess, checkers
4. [x] Add aspect detection step to Phase 4 (Create Artifacts)
5. [x] Store detected aspects in PROJECT.md
6. [x] Update Phase 5 (Generate Initial Code) to:
   - Read aspect template files for detected aspects
   - Merge aspect elements into elements.ts
   - Merge aspect setup into game.ts
   - Merge aspect UI into GameBoard.vue
7. [x] Test each aspect individually
8. [x] Test aspect combinations (e.g., Dice + SquareGrid)
9. [x] Test no-aspect baseline (game with none detected)

## Files Modified

- `src/cli/slash-command/instructions.md` - Add detection and integration logic
- `src/cli/slash-command/aspects/index.md` - Aspect registry with keywords

## Success Criteria

- [x] Aspects detected from interview keywords
- [x] Detected aspects listed in PROJECT.md
- [x] Generated code includes aspect-specific elements
- [x] Generated UI includes aspect-specific components
- [x] Games with no detected aspects still work
