---
phase: 57-selection-pick-rename
plan: 02
type: execute
wave: 2
depends_on: ["57-01"]
files_modified:
  - src/ui/composables/useActionControllerTypes.ts
  - src/ui/composables/useActionController.ts
  - src/ui/composables/useActionController.helpers.ts
  - src/ui/composables/useActionController.selections.test.ts
  - src/ui/composables/useActionController.picks.test.ts
  - src/ui/composables/actionControllerHelpers.ts
  - src/ui/composables/useBoardInteraction.ts
  - src/ui/composables/useGameViewEnrichment.ts
  - src/ui/components/auto-ui/ActionPanel.vue
  - src/ui/components/GameShell.vue
  - src/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "currentSelection renamed to currentPick in useActionController"
    - "fetchSelectionChoices renamed to fetchPickChoices"
    - "selectionStep renamed to pickStep"
    - "injectSelectionStepFn renamed to injectPickStepFn"
  artifacts:
    - path: "src/ui/composables/useActionController.ts"
      provides: "Renamed composable exports"
      contains: "currentPick"
    - path: "src/ui/composables/useActionController.picks.test.ts"
      provides: "Renamed test file"
      contains: "describe.*pick"
    - path: "src/ui/index.ts"
      provides: "Updated exports"
      contains: "injectPickStepFn"
  key_links:
    - from: "src/ui/index.ts"
      to: "useActionController"
      via: "export"
      pattern: "export.*currentPick|pickStep"
    - from: "src/ui/composables/useActionController.ts"
      to: "src/session"
      via: "import"
      pattern: "import.*PickMetadata"
---

<objective>
Rename selection-related APIs to use "pick" terminology in the UI composables layer.

Purpose: Align UI APIs with nomenclature.md's "Pick" definition for consistent developer experience.
Output: Renamed composable properties (currentPick, pickStep, fetchPickChoices) and injection helpers.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/57-selection-pick-rename/57-RESEARCH.md
@.planning/phases/57-selection-pick-rename/57-01-SUMMARY.md

@src/ui/composables/useActionControllerTypes.ts
@src/ui/composables/useActionController.ts
@src/ui/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename useActionController types and exports</name>
  <files>src/ui/composables/useActionControllerTypes.ts, src/ui/composables/useActionController.ts, src/ui/composables/useActionController.helpers.ts</files>
  <action>
In src/ui/composables/useActionControllerTypes.ts:
1. Import PickMetadata from session (update from SelectionMetadata)
2. Rename `SelectionMetadata` interface to `PickMetadata` (or re-export from session)
3. Rename `SelectionStepResult` to `PickStepResult`
4. Rename `SelectionChoicesResult` to `PickChoicesResult`
5. Rename `SelectionSnapshot` to `PickSnapshot`
6. Add deprecation aliases for all renamed types

In UseActionControllerOptions interface:
1. Rename `fetchSelectionChoices` to `fetchPickChoices`
2. Rename `selectionStep` to `pickStep`
3. Add deprecated aliases in JSDoc

In UseActionControllerReturn interface:
1. Rename `currentSelection` to `currentPick`
2. Rename `fetchChoicesForSelection` to `fetchChoicesForPick`
3. Add deprecated aliases

In src/ui/composables/useActionController.ts:
1. Update all internal references to use new names
2. Return object should use new property names: currentPick, fetchPickChoices, pickStep
3. Keep internal variable names if needed for minimal code churn
4. Update JSDoc comments to reference "pick" instead of "selection"

In src/ui/composables/useActionController.helpers.ts:
1. Update any selection references to pick in JSDoc
2. Update function implementations if they reference selection types
  </action>
  <verify>
- `grep "currentPick" src/ui/composables/useActionController.ts` shows new name
- `grep "pickStep" src/ui/composables/useActionControllerTypes.ts` shows new option name
- `npm run typecheck` passes
  </verify>
  <done>useActionController types and return values renamed to pick terminology</done>
</task>

<task type="auto">
  <name>Task 2: Rename injection helpers and update components</name>
  <files>src/ui/composables/actionControllerHelpers.ts, src/ui/composables/useBoardInteraction.ts, src/ui/composables/useGameViewEnrichment.ts, src/ui/components/auto-ui/ActionPanel.vue, src/ui/components/GameShell.vue</files>
  <action>
In src/ui/composables/useActionController.ts (injection helpers at bottom):
1. Rename `injectSelectionStepFn` to `injectPickStepFn`
2. Add deprecated alias: `export const injectSelectionStepFn = injectPickStepFn;`
3. Update `SelectionStepFn` type to `PickStepFn` with alias

In src/ui/composables/actionControllerHelpers.ts:
1. Update references to selection -> pick in JSDoc and comments
2. Update any type references

In src/ui/composables/useBoardInteraction.ts:
1. Update selection references to pick in comments/JSDoc
2. Update any type imports if needed

In src/ui/composables/useGameViewEnrichment.ts:
1. Update selection references to pick
2. Update type imports if needed

In src/ui/components/auto-ui/ActionPanel.vue:
1. Update template to use currentPick instead of currentSelection
2. Update any selection-related props or computed properties
3. Update JSDoc comments

In src/ui/components/GameShell.vue:
1. Update any selection references to pick
2. Update slot props if they expose selection-related data
  </action>
  <verify>
- `grep "injectPickStepFn" src/ui/composables/useActionController.ts` shows new export
- `grep "currentPick" src/ui/components/auto-ui/ActionPanel.vue` shows updated template
- `npm run typecheck` passes
  </verify>
  <done>Injection helpers renamed, Vue components updated to use pick terminology</done>
</task>

<task type="auto">
  <name>Task 3: Rename test file and update UI exports</name>
  <files>src/ui/composables/useActionController.selections.test.ts, src/ui/composables/useActionController.picks.test.ts, src/ui/composables/useActionController.test.ts, src/ui/index.ts</files>
  <action>
Rename test file:
1. `git mv src/ui/composables/useActionController.selections.test.ts src/ui/composables/useActionController.picks.test.ts`
2. Update test descriptions to reference "pick" instead of "selection"
3. Update test assertions to use new property names (currentPick, pickStep, etc.)

In src/ui/composables/useActionController.test.ts:
1. Update any selection references to pick in test descriptions and assertions

In src/ui/index.ts:
1. Update exports to use new names:
   - `injectPickStepFn` (with deprecated `injectSelectionStepFn` alias)
   - `PickMetadata` (with deprecated `SelectionMetadata` alias)
   - `PickStepResult`, `PickChoicesResult`
   - `PickSnapshot`
   - `PickStepFn`
2. Keep deprecated aliases for backward compatibility
3. Update JSDoc export comments
  </action>
  <verify>
- Test file renamed: `ls src/ui/composables/useActionController.picks.test.ts`
- `git log --oneline src/ui/composables/useActionController.picks.test.ts` shows history
- `npm test src/ui` passes (all UI tests)
- `grep "injectPickStepFn" src/ui/index.ts` shows export
  </verify>
  <done>Test file renamed, UI exports updated with deprecation aliases</done>
</task>

</tasks>

<verification>
- `npm run typecheck` passes
- `npm test src/ui` passes (all UI tests)
- `grep -r "currentPick" src/ui/` shows new property name in use
- `grep -r "pickStep" src/ui/` shows new option name
- Deprecated aliases still work (backward compatibility)
</verification>

<success_criteria>
- currentSelection -> currentPick in useActionController
- fetchSelectionChoices -> fetchPickChoices option
- selectionStep -> pickStep option
- injectSelectionStepFn -> injectPickStepFn export
- Test file renamed with history preserved
- All deprecation aliases in place
- All UI tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/57-selection-pick-rename/57-02-SUMMARY.md`
</output>
