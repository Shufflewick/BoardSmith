---
phase: 67-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/session/colors.ts
  - src/session/index.ts
  - src/ui/index.ts
  - docs/api/session.md
  - docs/api/ui.md
  - docs/ui-components.md
  - docs/core-concepts.md
autonomous: true

must_haves:
  truths:
    - "IDE shows deprecation warning when hovering over DEFAULT_PLAYER_COLORS import"
    - "Deprecation message explains what to use instead (player.color)"
    - "Documentation shows player.color as the primary color API"
    - "Documentation includes migration example from DEFAULT_PLAYER_COLORS to player.color"
  artifacts:
    - path: "src/session/colors.ts"
      provides: "Deprecated DEFAULT_PLAYER_COLORS with JSDoc"
      contains: "@deprecated"
    - path: "docs/api/session.md"
      provides: "Session API documentation with deprecation note"
      contains: "deprecated"
    - path: "docs/core-concepts.md"
      provides: "Player Colors section with new API"
      contains: "player.color"
  key_links:
    - from: "src/session/colors.ts"
      to: "src/session/index.ts"
      via: "re-export with deprecation preserved"
      pattern: "DEFAULT_PLAYER_COLORS"
    - from: "src/session/index.ts"
      to: "src/ui/index.ts"
      via: "re-export with deprecation preserved"
      pattern: "DEFAULT_PLAYER_COLORS"
---

<objective>
Mark DEFAULT_PLAYER_COLORS as deprecated and update documentation to reflect the new player.color API.

Purpose: Complete the v2.5 Player Colors Refactor by providing clear migration guidance and documenting the new API. This makes the "pit of success" path obvious to game developers.

Output: Deprecated export with migration guidance, updated documentation showing new API as primary pattern.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/67-cleanup/67-RESEARCH.md
@src/session/colors.ts
@docs/api/session.md
@docs/api/ui.md
@docs/ui-components.md
@docs/core-concepts.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deprecate DEFAULT_PLAYER_COLORS export</name>
  <files>src/session/colors.ts, src/session/index.ts, src/ui/index.ts</files>
  <action>
Add @deprecated JSDoc annotation to DEFAULT_PLAYER_COLORS in all export locations:

1. In `src/session/colors.ts` (primary definition, line 59-62):
   - Add comprehensive @deprecated JSDoc with:
     - Clear statement that colors are now auto-assigned by the engine
     - Migration guidance: "Use player.color instead"
     - Code example showing before/after pattern
     - Reference to where colors come from (DEFAULT_COLOR_PALETTE in engine)

2. In `src/session/index.ts` (re-export, around line 101-107):
   - The re-export already groups DEFAULT_PLAYER_COLORS with other color exports
   - JSDoc deprecation on the original definition should propagate through re-exports
   - Verify no additional annotation needed

3. In `src/ui/index.ts` (re-export, around line 309-314):
   - The re-export pulls from session/index.ts
   - JSDoc deprecation should propagate
   - Verify no additional annotation needed

Why this approach: JSDoc @deprecated annotations are editor-visible (IDE shows strikethrough and warning on hover) with zero runtime cost. The original definition's JSDoc propagates through re-exports in TypeScript.
  </action>
  <verify>
1. Run `grep -n "@deprecated" src/session/colors.ts` - should show the annotation
2. In VS Code, hover over `DEFAULT_PLAYER_COLORS` import from any location - should show deprecation warning
3. Run `npm run typecheck` - no type errors
  </verify>
  <done>DEFAULT_PLAYER_COLORS has @deprecated JSDoc that explains to use player.color instead, with migration example</done>
</task>

<task type="auto">
  <name>Task 2: Update documentation for new player.color API</name>
  <files>docs/api/session.md, docs/api/ui.md, docs/ui-components.md, docs/core-concepts.md</files>
  <action>
Update documentation to show player.color as the primary API:

1. In `docs/api/session.md` (around line 37-40 "Player Colors" section):
   - Fix incorrect description: "DEFAULT_PLAYER_COLORS" says "Default 6 player colors" but it's actually 2 (Red, Blue)
   - Add "(deprecated)" note after DEFAULT_PLAYER_COLORS
   - Keep STANDARD_PLAYER_COLORS as-is (8 colors, not deprecated)
   - Keep createColorOption as-is (still useful for custom playerOptions)

2. In `docs/api/ui.md` (around line 155-158 "Player Colors" section):
   - Add "(deprecated)" note after DEFAULT_PLAYER_COLORS
   - Keep STANDARD_PLAYER_COLORS as-is

3. In `docs/ui-components.md` (around line 273-307 "Standard Color Picker" section):
   - Update the code example to show the NEW way first (player.color)
   - Add migration section showing old way (DEFAULT_PLAYER_COLORS) and new way (player.color)
   - Keep createColorOption example for games that want custom playerOptions

4. In `docs/core-concepts.md`:
   - Find "Player Options" or "Game Definition Metadata" section (around line 325-462)
   - The existing playerOptions examples with createColorOption() are still valid for lobby configuration
   - Add a new "Player Colors" subsection under "Player System" (after line 246) that explains:
     - Players automatically receive a `color` property from the engine
     - How to access it in rules code: `player.color`
     - How to access it in UI: `gameView.players[i].color`
     - Optionally configure custom palette via game definition `colors` array
     - Optionally disable color selection via `colorSelectionEnabled: false`
  </action>
  <verify>
1. Run `grep -n "deprecated" docs/api/session.md` - should show deprecation note
2. Run `grep -n "player.color" docs/core-concepts.md` - should show new API
3. Run `grep -n "player.color" docs/ui-components.md` - should show new API in examples
4. Review each file visually to ensure consistent messaging
  </verify>
  <done>Documentation shows player.color as primary API with migration guidance from DEFAULT_PLAYER_COLORS</done>
</task>

</tasks>

<verification>
1. Type checking passes: `npm run typecheck`
2. Deprecation visible in IDE: hover over DEFAULT_PLAYER_COLORS import shows warning
3. Documentation consistency: all docs reference player.color as primary API
4. Migration path clear: docs show before/after examples
</verification>

<success_criteria>
- CLN-01: DEFAULT_PLAYER_COLORS has @deprecated JSDoc with migration guidance to player.color
- CLN-02: Documentation describes player.color API as primary, with examples and migration guidance
- No breaking changes: deprecated API still works, just shows warnings
- Consistent messaging across all documentation files
</success_criteria>

<output>
After completion, create `.planning/phases/67-cleanup/67-01-SUMMARY.md`
</output>
