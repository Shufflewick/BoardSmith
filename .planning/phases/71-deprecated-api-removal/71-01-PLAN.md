---
phase: 71-deprecated-api-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/ui/composables/usePlayerStatAnimation.ts
  - src/ui/components/auto-ui/AutoGameBoard.vue
  - src/ui/composables/useActionAnimations.ts
  - src/ui/composables/useFlyingElements.ts
  - src/ui/index.ts
  - docs/ui-components.md
autonomous: true

must_haves:
  truths:
    - "Internal callers use fly()/flyMultiple()/FlyConfig APIs"
    - "Deprecated flyCard()/flyCards()/FlyCardOptions no longer exist"
    - "All tests pass after migration"
  artifacts:
    - path: "src/ui/composables/usePlayerStatAnimation.ts"
      provides: "Player stat animation using new API"
      contains: "FlyConfig"
    - path: "src/ui/components/auto-ui/AutoGameBoard.vue"
      provides: "Auto game board using fly() API"
      contains: "fly("
    - path: "src/ui/composables/useActionAnimations.ts"
      provides: "Action animations using fly() API"
      contains: "fly("
    - path: "src/ui/composables/useFlyingElements.ts"
      provides: "Flying elements without deprecated APIs"
      not_contains: "flyCard("
  key_links:
    - from: "src/ui/composables/usePlayerStatAnimation.ts"
      to: "src/ui/composables/useFlyingElements.ts"
      via: "FlyConfig type import"
      pattern: "import type \\{ FlyConfig \\}"
    - from: "src/ui/index.ts"
      to: "src/ui/composables/useFlyingElements.ts"
      via: "FlyConfig export (not FlyCardOptions)"
      pattern: "type FlyConfig"
---

<objective>
Migrate internal callers from deprecated flying APIs to new APIs, then remove deprecated code.

Purpose: Complete the flying element API cleanup by removing deprecated `flyCard()`/`flyCards()`/`FlyCardOptions` after all internal callers migrate to `fly()`/`flyMultiple()`/`FlyConfig`.

Output: Clean flying element API with no deprecated methods or types.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/71-deprecated-api-removal/71-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate internal callers to new flying APIs</name>
  <files>
    src/ui/composables/usePlayerStatAnimation.ts
    src/ui/components/auto-ui/AutoGameBoard.vue
    src/ui/composables/useActionAnimations.ts
  </files>
  <action>
Migrate three files from deprecated APIs to new APIs using these mechanical transformations:

**Parameter Mapping:**
| Deprecated | New |
|------------|-----|
| `FlyCardOptions` | `FlyConfig` |
| `cardData` | `elementData` |
| `cardSize` | `elementSize` |
| `flyCard()` | `fly()` |
| `flyCards()` | `flyMultiple()` |

**usePlayerStatAnimation.ts:**
1. Line 37: Change import from `FlyCardOptions` to `FlyConfig`
2. Lines 97-99: Update function signature - change parameter name from `flyCards` to `flyMultiple` and type from `FlyCardOptions[]` to `FlyConfig[]`
3. Line 127: Change `flyCards(` call to `flyMultiple(`
4. Line 132: Rename `cardData:` to `elementData:`
5. Line 145: Rename `cardSize,` to `elementSize,` (note: the variable is already named `cardSize` from options, keep using it but rename the property)

**AutoGameBoard.vue:**
1. Line 26: Remove `type FlyCardOptions` from import (keep useFlyingElements)
2. Line 143: Change destructure from `flyCard` to `fly`
3. Lines 315-323: Change `flyCard({` to `fly({`, rename `cardData:` to `elementData:`
4. Lines 354-364: Change `flyCard({` to `fly({`, rename `cardData:` to `elementData:`, rename `cardSize:` to `elementSize:`

**useActionAnimations.ts:**
1. Line 356: Change destructure from `flyCard` to `fly`
2. Line 511: Change `await flyCard({` to `await fly({`
3. Line 515: Rename `cardData:` to `elementData:`
4. Line 517: Rename `cardSize:` to `elementSize:`
  </action>
  <verify>
Run TypeScript compilation: `npx tsc --noEmit`
All three files should compile without errors.
  </verify>
  <done>
All internal callers use fly()/flyMultiple()/FlyConfig with no references to deprecated APIs.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove deprecated APIs and update exports</name>
  <files>
    src/ui/composables/useFlyingElements.ts
    src/ui/index.ts
    docs/ui-components.md
  </files>
  <action>
Remove deprecated APIs after all callers have migrated:

**useFlyingElements.ts:**
1. Lines 198-214: Delete the `FlyCardOptions` interface entirely
2. Lines 379-389: Remove `flyCard` and `flyCards` from `UseFlyingElementsReturn` interface (keep the new APIs)
3. Lines 746-771: Delete the `flyCard` function entirely
4. Lines 753-771: Delete the `flyCards` function entirely (adjust line numbers after prior deletion)
5. Lines 1079-1081: Remove `flyCard` and `flyCards` from the return statement

**src/ui/index.ts:**
1. Line 96: Remove `type FlyCardOptions,` from the export list

**docs/ui-components.md:**
1. Lines 912-923: Update the usePlayerStatAnimation example:
   - Change `const { flyCards } = useFlyingElements();` to `const { flyMultiple } = useFlyingElements();`
   - Change `flyToPlayerStat(flyCards, {` to `flyToPlayerStat(flyMultiple, {`
  </action>
  <verify>
Run full test suite: `npm test`
All tests should pass (no tests directly use the deprecated APIs based on research).
  </verify>
  <done>
- `flyCard()` method no longer exists in useFlyingElements
- `flyCards()` method no longer exists in useFlyingElements
- `FlyCardOptions` interface no longer exists in useFlyingElements
- `FlyCardOptions` no longer exported from src/ui/index.ts
- Documentation updated to use new APIs
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npx tsc --noEmit` passes with no errors
2. `npm test` passes with no failures
3. Grep for deprecated APIs returns no source code matches:
   - `grep -r "FlyCardOptions" src/` returns nothing
   - `grep -r "flyCard\s*(" src/` returns nothing (excluding comments)
   - `grep -r "flyCards\s*(" src/` returns nothing (excluding comments)
</verification>

<success_criteria>
- DEP-04: usePlayerStatAnimation.ts uses fly()/flyMultiple()/FlyConfig
- DEP-05: AutoGameBoard.vue uses fly()/flyMultiple()/FlyConfig
- DEP-06: useActionAnimations.ts uses fly()/flyMultiple()/FlyConfig
- DEP-01: flyCard() method removed from useFlyingElements
- DEP-02: flyCards() method removed from useFlyingElements
- DEP-03: FlyCardOptions interface removed from useFlyingElements
- All tests pass after API removal
</success_criteria>

<output>
After completion, create `.planning/phases/71-deprecated-api-removal/71-01-SUMMARY.md`
</output>
